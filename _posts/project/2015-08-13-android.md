---
layout: post
title: android
category: project
description: 关于android的一些事情
---
最近由于工作的原因,一直都在学习android.以至于其他的基本都没有看,这个模块也好久没有更新了,所以新开一个进行工作上的总结，因为工作主要是改android源码的bug,而我自己也学习了一些andorid
app开发有关的东西,所以主要分为两个标题,一个是android app 另一个就是android源码
###android源码
至今为止改过的bug都简要的进行总结
#swipe left for/swipe right for 中英文转换问题
即,当系统从英文转换为中文的时候,在锁屏下方的锁屏快捷方式点击的时候,swipe left for 还是保持英文的状态,因为没有log,所以直接看的源码在源码中搜索swipe left for 结果的确找到了一个
类,但是想追诉他的源的时候的确是没有找到,后来是因为老师之前有解决过这个bug,所以直接就掠过了,原因是没有中文的xml配置文件,但是我在git apply +编译然后烤到测试机里的时候,出现了一个bug
就是当这个锁屏快捷方式改成非默认的时候还是会出现英文乱码的问题,因为之前查过google android的有关源码,所以知道了当系统更换语言的时候,会遍历所有的app并且把响应的语言更改回来,原本以为是
在这个遍历的时候出现了什么问题,但是后来想想又不太可能,还有一个问题,就是这次我并没有将所有的源码都重新编译一遍,而是只有framework这一部分,所以直接就先全部编译一次,然后就好使了.
#锁屏拨打紧急电话,当紧急电话结束的时候,没有返回锁屏的界面
怎么说呢，这个应该属于一个伪命题,因为系统本身就是这么设计的,但是为了找出在那个地方设定了这个原因我还是花了将近一天的时间看这个东西,最终在老师的帮助下,总算是把这个地点了解了
多亏这个,我也清楚了,这个拨打紧急电话主要跟两个类有关,一个是EmergencyDialer还有一个就是InCall。。。有关,得以看到这个主要是跟一个软件有关,叫什么Hierarchy。。。。


--有个重要的东西就是当手机每次返回主页面的时候都会发出广播 broadcast idle_screen ....... 我却误认为每次将要返回主页面的时候会发出这个广播,把结果当成了原因
#kk版本的cmwap和cmnet下的有关发送彩信数据流量的上下箭头不显示的问题
这个其实还是有待解决的一个问题,但是这个应该是迄今为止我看的时间最长的一个bug 其实学到的东西还是蛮多的,主要是有关于数据流量  updateIcon 这个类,主要是接受其他地方发来的信息来更新
上下箭头图标的,还有就是一般的类前面带m的一般指的是多sim卡,还有在更新updateIcon的时候都会遍历将所有卡槽和有效卡数进行对比来进行更新,因为是多卡,所以每个卡显示信号的时候都会有流量的
上下箭头,仔细看过之后发现问题并不在这里,那问题就可能出现在通知updateIcon进行更新的类上边,通过阅读log ....


#strcpy的过时问题
其实这个是c++的一个东西,对于c++我的确是一窍不通,但是通过这个还是学到了不少的东西,总所周知,c++需要进行内存管理,这个strcpy之所以过时就是因为在复制的时候容易照成分配空间不够,导致数据丢失
,于是c++更新strlcpy这个函数之所以用来代替之气那strcpy完全是由于这个函数有着第三个参数,必须传入目标容器的大小,并且与要复制的字符串的大小进行比较,只有容器的大小大于字符串的大小的时候
才会将数据进行复制
###android app

